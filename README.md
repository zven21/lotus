# Lotus

<div align="center">
**åŸºäº Elixir/Phoenix/Ash çš„å…ƒæ•°æ®é©±åŠ¨ä»£ç ç”Ÿæˆæ¡†æ¶**

**A metadata-driven code generation framework built with Elixir, Phoenix, and Ash Framework**

</div>

---

**Language**: [English](./README_EN.md) | ä¸­æ–‡

## ğŸ“– ç®€ä»‹

Lotus æ˜¯ä¸€ä¸ªçµæ´»çš„å…ƒæ•°æ®é©±åŠ¨æ¡†æ¶ï¼Œå‚è€ƒäº† Strapi çš„è®¾è®¡æ€è·¯ï¼ŒåŸºäº Elixirã€Phoenix å’Œ Ash Framework æ„å»ºã€‚å®ƒé‡‡ç”¨"å…ƒæ•°æ®é©±åŠ¨"çš„æ–¹å¼å®šä¹‰ç±»å‹ã€å­—æ®µä¸å…³ç³»ï¼Œå¹¶é€šè¿‡ Publisher ä¸€é”®ç”Ÿæˆå¯ç‰ˆæœ¬åŒ–çš„ Elixir èµ„æºä»£ç ä¸æ•°æ®åº“è¿ç§»ï¼ŒåŒæ—¶è‡ªåŠ¨æš´éœ² JSON:API ä¸ GraphQL æ¥å£ã€‚

**æ ¸å¿ƒç†å¿µ**ï¼šæ¨¡å‹å³çœŸç›¸ã€‚å»ºæ¨¡äº§å‡ºå³ä¸ºä»£ç çœŸç›¸ï¼Œå¯å®¡é˜…ã€å¯è¿½è¸ªã€å¯æ‰©å±•ï¼Œå…¼å…·é«˜å¹¶å‘ä¸ä½å»¶è¿Ÿçš„è¿è¡Œæ—¶ç‰¹æ€§ã€‚

### åº”ç”¨åœºæ™¯

Lotus è®¾è®¡çµæ´»ï¼Œå¯ä»¥é€‚åº”å¤šç§åœºæ™¯ã€‚è™½ç„¶å¯ä»¥ç”¨ä½œ Headless CMSï¼Œä½†ä¸ä»…é™äºæ­¤ï¼š

- **ä½ä»£ç å¹³å°åº•å±‚**ï¼šåœ¨ Lotus çš„å…ƒæ•°æ®é©±åŠ¨æ¶æ„ä¹‹ä¸Šæ„å»ºä½ çš„ä½ä»£ç å¹³å°
- **AI æ¶æ„**ï¼šä½œä¸ºéœ€è¦åŠ¨æ€ç”Ÿæˆ Schema çš„ AI åº”ç”¨çš„åº•å±‚åŸºç¡€
- **å†…éƒ¨å¿«é€Ÿè„šæ‰‹æ¶**ï¼šä»å…ƒæ•°æ®å®šä¹‰å¿«é€Ÿç”Ÿæˆå…¬å¸å†…éƒ¨å·¥å…·å’Œåº”ç”¨
- **å†…å®¹ç®¡ç†**ï¼šä½œä¸ºä¼ ç»Ÿ Headless CMS ç”¨äºå†…å®¹é©±åŠ¨çš„åº”ç”¨

**è¯´æ˜**ï¼šé¡¹ç›®ä»åœ¨æ¼”è¿›ä¸­ï¼Œå°šæœªå®šå‹ã€‚æˆ‘ä»¬æ­£åœ¨æ¢ç´¢ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œæ¬¢è¿è´¡çŒ®æ¥å…±åŒå¡‘é€ å…¶å‘å±•æ–¹å‘ã€‚

## âœ¨ ç‰¹æ€§

### âœ… å·²å®ç°

- **ğŸ“Š å…ƒæ•°æ®é©±åŠ¨å»ºæ¨¡**
  - é€šè¿‡å¯è§†åŒ– Builder ç•Œé¢æˆ–é…ç½®æ–‡ä»¶å®šä¹‰ç±»å‹ã€å­—æ®µå’Œå…³ç³»

- **ğŸš€ ä¸€é”®å‘å¸ƒ**
  - ç”Ÿæˆå¯ç‰ˆæœ¬åŒ–çš„ `.ex` èµ„æºæ–‡ä»¶å’Œæ•°æ®åº“è¿ç§»

- **ğŸ”„ å…³ç³»è‡ªåŠ¨åå‘**
  - `manyToOne` è‡ªåŠ¨ç”Ÿæˆ `oneToMany` åå‘å…³ç³»

- **ğŸŒ åŒåè®®è¾“å‡º**
  - å†…ç½® JSON:API å’Œ GraphQL æ”¯æŒï¼ˆåŒ…å« GraphiQL Playgroundï¼‰

- **ğŸ“ å¯è§†åŒ–å†…å®¹ç®¡ç†**
  - Entries ç•Œé¢è¿›è¡Œç›´è§‚çš„ CRUD æ“ä½œ

- **ğŸ” é…ç½®éªŒè¯**
  - JSON Schema æ ¡éªŒé…ç½®å®Œæ•´æ€§

- **ğŸ“ˆ å¢é‡è¿ç§»**
  - æ”¯æŒé…ç½® diff å’Œå¢é‡è¿ç§»ç”Ÿæˆ

### â³ è§„åˆ’ä¸­

- æ›´å¤šå­—æ®µç±»å‹ï¼ˆæšä¸¾ã€å¯Œæ–‡æœ¬ã€JSON schemaï¼‰
- æƒé™æ§åˆ¶ï¼ˆRBAC/ABACï¼‰
- è‰ç¨¿/å‘å¸ƒå·¥ä½œæµ
- åª’ä½“èµ„äº§ç®¡ç†
- å¤šç¯å¢ƒé…ç½®å¯¹é½
- Webhooks/Events
- æ’ä»¶åŒ–æœºåˆ¶

## ğŸ—ï¸ æ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Builder (UI)                          â”‚
â”‚          ContentType / ContentField / ContentRelation     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Publisher                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Config     â”‚  â”‚  Generators  â”‚  â”‚ Migrations   â”‚   â”‚
â”‚  â”‚  Loader      â”‚  â”‚  (AST)       â”‚  â”‚  Generator   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿæˆä»£ç          â”‚    â”‚  æ•°æ®åº“ Schema    â”‚
â”‚  (Ash Resources)  â”‚    â”‚  (Ecto Migrations)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  JSON:API / GraphQL  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Elixir ~> 1.15
- Erlang/OTP 24+
- PostgreSQL 12+
- Node.js (ç”¨äºå‰ç«¯èµ„æºæ„å»º)

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/zven21/lotus.git
cd lotus

# å®‰è£…ä¾èµ–
mix deps.get

# è®¾ç½®æ•°æ®åº“
mix ecto.setup

# å¯åŠ¨æœåŠ¡å™¨
mix phx.server

# æ‰“å¼€æµè§ˆå™¨
open http://localhost:4000/cms/
```

### ä½¿ç”¨æµç¨‹

#### 1. å®šä¹‰å†…å®¹ç±»å‹

è®¿é—® `/cms/builder` åˆ›å»ºå†…å®¹ç±»å‹ï¼š

- åˆ›å»º ContentTypeï¼ˆå¦‚ `article`, `author`ï¼‰
- æ·»åŠ  ContentFieldï¼ˆå¦‚ `title`, `body`, `email`ï¼‰
- å®šä¹‰ ContentRelationï¼ˆå¦‚ `article.author` â†’ `manyToOne`ï¼‰

#### 2. ç®¡ç†å†…å®¹

è®¿é—® `/cms/:slug/entries` è¿›è¡Œå†…å®¹ç®¡ç†ï¼š

- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ¡ç›®
- å…³ç³»å­—æ®µè‡ªåŠ¨ä»¥ä¸‹æ‹‰é€‰æ‹©å™¨å‘ˆç°

#### 3. ä½¿ç”¨ API

**JSON:API**
```bash
# è·å–æ‰€æœ‰æ–‡ç« 
GET /api/article

# è·å–å•ç¯‡æ–‡ç« 
GET /api/article/:id
```

**GraphQL**
```graphql
# è®¿é—® GraphiQL Playground
GET /api/graphiql

# æŸ¥è¯¢ç¤ºä¾‹
query {
  articles {
    id
    title
    body
    author {
      name
      email
    }
  }
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
lotus/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ lotus/
â”‚   â”‚   â”œâ”€â”€ cms/
â”‚   â”‚   â”‚   â”œâ”€â”€ ash/              # Ash èµ„æºå®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ publisher/        # å‘å¸ƒç³»ç»Ÿæ ¸å¿ƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ application/  # åº”ç”¨å±‚ï¼ˆæ£€æŸ¥ã€é’©å­ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ generators/   # ä»£ç ç”Ÿæˆå™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ infrastructure/ # åŸºç¡€è®¾æ–½
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ interfaces/   # æ¥å£å±‚
â”‚   â”‚   â”‚   â””â”€â”€ config_monitor.ex
â”‚   â”‚   â”œâ”€â”€ generated/            # ç”Ÿæˆçš„èµ„æºä»£ç 
â”‚   â”‚   â””â”€â”€ dynamic_module.ex     # åŠ¨æ€æ¨¡å—ç”Ÿæˆ
â”‚   â””â”€â”€ lotus_web/
â”‚       â”œâ”€â”€ controllers/          # Phoenix æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ live/                 # LiveView é¡µé¢
â”‚       â””â”€â”€ router.ex             # è·¯ç”±å®šä¹‰
â”œâ”€â”€ priv/
â”‚   â”œâ”€â”€ cms/
â”‚   â”‚   â””â”€â”€ config/               # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ repo/
â”‚       â””â”€â”€ migrations/           # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ test/                         # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ docs/                         # æ–‡æ¡£
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

- **Elixir** ~> 1.15 - å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€
- **Phoenix** ~> 1.8 - Web æ¡†æ¶
- **Ash Framework** ~> 3.7 - èµ„æºå®šä¹‰å’Œ API ç”Ÿæˆ

### æ•°æ®åº“

- **PostgreSQL** - é€šè¿‡ Ecto/Postgrex

### å‰ç«¯

- **Phoenix LiveView** - å®æ—¶ UI
- **Tailwind CSS** - æ ·å¼æ¡†æ¶

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](./CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](./LICENSE)ã€‚

## ğŸ™ è‡´è°¢

- å— [Strapi](https://strapi.io/) çš„è®¾è®¡æ€è·¯å¯å‘
- åŸºäº [Ash Framework](https://ash-hq.org/) çš„å¼ºå¤§èƒ½åŠ›
- ä½¿ç”¨ [Phoenix Framework](https://www.phoenixframework.org/) æ„å»º

<div align="center">

**Made with â¤ï¸ using Elixir & Phoenix**

</div>
